<!-- index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serenamente - App de Salud Mental</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Service Worker Status -->
    <div class="service-worker.js">
        <span class="sw-indicator sw-pending" id="sw-indicator"></span>
        <span id="sw-message">Verificando Service Worker...</span>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-content">
            <div>
                <h1 class="logo">Serenamente</h1>
                <p class="subtitle">Tu santuario digital para el bienestar emocional</p>
            </div>
            <div class="theme-selector">
                <button class="theme-btn" data-theme="default">
                    <span class="theme-icon">‚òÄÔ∏è</span>
                    Predeterminado
                </button>
                <button class="theme-btn" data-theme="dark">
                    <span class="theme-icon">üåô</span>
                    Oscuro
                </button>
                <button class="theme-btn" data-theme="nature">
                    <span class="theme-icon">üåø</span>
                    Naturaleza
                </button>
                <button class="theme-btn" data-theme="calm">
                    <span class="theme-icon">üåä</span>
                    Calma
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <section id="home" class="module-container active">
            <h1>Bienvenido a Serenamente</h1>
            <p class="text-center">Tu espacio personal para encontrar paz, equilibrio y bienestar emocional. Explora herramientas dise√±adas para nutrir tu mente y alma.</p>
            
            <div class="grid grid-4">
                <div class="card text-center">
                    <i class="fas fa-book-open fa-3x mb-3" style="color: #8b5cf6;"></i>
                    <h3>Diario Emocional</h3>
                    <p>Registra tus sentimientos diarios y descubre patrones en tu bienestar emocional.</p>
                    <a href="journal.html" class="btn btn-primary">Explorar</a>
                </div>
                
                <div class="card text-center">
                    <i class="fas fa-meditation fa-3x mb-3" style="color: #3b82f6;"></i>
                    <h3>Meditaciones Guiadas</h3>
                    <p>Accede a sesiones de meditaci√≥n para reducir el estr√©s y encontrar la calma interior.</p>
                    <a href="meditation.html" class="btn btn-primary">Explorar</a>
                </div>
                
                <div class="card text-center">
                    <i class="fas fa-wind fa-3x mb-3" style="color: #10b981;"></i>
                    <h3>Ejercicios de Respiraci√≥n</h3>
                    <p>Practica t√©cnicas de respiraci√≥n consciente para calmar tu sistema nervioso.</p>
                    <a href="breathing.html" class="btn btn-primary">Explorar</a>
                </div>
                
                <div class="card text-center">
                    <i class="fas fa-chart-line fa-3x mb-3" style="color: #f59e0b;"></i>
                    <h3>Panel de Progreso</h3>
                    <p>Sigue tu evoluci√≥n emocional con estad√≠sticas visuales y an√°lisis personalizados.</p>
                    <a href="progress.html" class="btn btn-primary">Explorar</a>
                </div>
            </div>
            
            <div class="grid grid-2 mt-8">
                <div class="card">
                    <h3>√Åreas de Apoyo</h3>
                    <p>Ofrecemos recursos espec√≠ficos para manejar ansiedad, depresi√≥n, estr√©s, trauma, TOC, adicciones y m√°s. Cada √°rea tiene herramientas adaptadas a tus necesidades.</p>
                    <a href="support.html" class="btn btn-outline">Ver todas las √°reas</a>
                </div>
                
                <div class="card">
                    <h3>H√°bitos Saludables</h3>
                    <p>Registro y seguimiento de rutinas que mejoran tu bienestar: meditaci√≥n, ejercicio, sue√±o, gratitud y respiraci√≥n consciente.</p>
                    <a href="habits.html" class="btn btn-outline">Registrar h√°bitos</a>
                </div>
            </div>
            
            <div class="card mt-8">
                <h3>Recomendaciones de Mejora</h3>
                <ul class="list-disc pl-6">
                    <li><strong>Alta prioridad:</strong> Agregar autenticaci√≥n y sincronizaci√≥n en la nube</li>
                    <li><strong>Alta prioridad:</strong> Mejorar la accesibilidad con etiquetas ARIA</li>
                    <li><strong>Media prioridad:</strong> Minificar recursos est√°ticos y optimizar im√°genes</li>
                    <li><strong>Media prioridad:</strong> Internacionalizaci√≥n para soporte de m√∫ltiples idiomas</li>
                    <li><strong>Baja prioridad:</strong> Reorganizar la estructura de archivos y eliminar redundancias</li>
                </ul>
            </div>
        </section>
    </main>

    <!-- Navigation -->
    <nav class="nav">
        <a href="index.html" class="nav-item active" data-module="home">
            <i class="fas fa-home"></i>
            Inicio
        </a>
        <a href="journal.html" class="nav-item" data-module="journal">
            <i class="fas fa-book"></i>
            Diario
        </a>
        <a href="meditation.html" class="nav-item" data-module="meditation">
            <i class="fas fa-meditation"></i>
            Meditaci√≥n
        </a>
        <a href="breathing.html" class="nav-item" data-module="breathing">
            <i class="fas fa-wind"></i>
            Respiraci√≥n
        </a>
        <a href="progress.html" class="nav-item" data-module="progress">
            <i class="fas fa-chart-line"></i>
            Progreso
        </a>
    </nav>

    <!-- Install PWA Button -->
    <button class="install-btn" id="install-btn" title="Instalar aplicaci√≥n">
        <i class="fas fa-cloud-download-alt"></i>
    </button>

    <!-- Footer -->
    <footer>
        ¬© 2024 Serenamente - Una aplicaci√≥n ilustrativa para bienestar emocional<br>
        Esta aplicaci√≥n no reemplaza la terapia profesional. Si est√°s pasando por un momento dif√≠cil, busca ayuda de un profesional de la salud mental.
    </footer>

    <!-- JavaScript -->
    <script src="app.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        // Check if service worker is supported
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    document.getElementById('sw-indicator').classList.remove('sw-pending');
                    document.getElementById('sw-indicator').classList.add('sw-active');
                    document.getElementById('sw-message').textContent = 'Service Worker activado';
                    
                    // Listen for updates
                    registration.onupdatefound = function() {
                        const installingWorker = registration.installing;
                        installingWorker.onstatechange = function() {
                            if (installingWorker.state === 'installed') {
                                if (navigator.serviceWorker.controller) {
                                    // New update available
                                    document.getElementById('sw-indicator').classList.remove('sw-active');
                                    document.getElementById('sw-indicator').classList.add('sw-pending');
                                    document.getElementById('sw-message').textContent = 'Actualizaci√≥n disponible. Recargue la p√°gina.';
                                    
                                    // Show notification to user
                                    setTimeout(() => {
                                        if (confirm('Nueva versi√≥n disponible. ¬øDesea actualizar ahora?')) {
                                            window.location.reload();
                                        }
                                    }, 1000);
                                } else {
                                    // Initial install
                                    document.getElementById('sw-indicator').classList.remove('sw-pending');
                                    document.getElementById('sw-indicator').classList.add('sw-active');
                                    document.getElementById('sw-message').textContent = 'Service Worker activado';
                                }
                            }
                        };
                    };
                }).catch(function(error) {
                    console.log('ServiceWorker registration failed: ', error);
                    document.getElementById('sw-indicator').classList.remove('sw-pending');
                    document.getElementById('sw-indicator').classList.add('sw-error');
                    document.getElementById('sw-message').textContent = 'Error al registrar Service Worker';
                });
            });
        }
        
        // Handle PWA installation
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-btn').style.display = 'flex';
        });
        
        document.getElementById('install-btn').addEventListener('click', () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    } else {
                        console.log('User dismissed the install prompt');
                    }
                    deferredPrompt = null;
                    document.getElementById('install-btn').style.display = 'none';
                });
            }
        });
        
        // Theme switching functionality
        document.querySelectorAll('.theme-btn').forEach(button => {
            button.addEventListener('click', () => {
                const theme = button.getAttribute('data-theme');
                document.body.className = '';
                if (theme !== 'default') {
                    document.body.classList.add(`theme-${theme}`);
                }
                
                // Save preference
                localStorage.setItem('serenamente-theme', theme);
            });
        });
        
        // Load saved theme
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('serenamente-theme');
            if (savedTheme && savedTheme !== 'default') {
                document.body.classList.add(`theme-${savedTheme}`);
                // Update active theme button
                document.querySelector(`.theme-btn[data-theme="${savedTheme}"]`).classList.add('active');
            }
        });
    </script>
</body>
</html>
